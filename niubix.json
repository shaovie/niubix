{
    "pid_file": "/tmp/niubix.pid",
    "master_log": "/tmp/niubix-master.log",
    "max_fds": 65535, // 0 represents system default limits `ulimit -n`. worker will inherit
    "?above": "The above are the master configuration, must restart to take effect",

    "worker_num": 0,  // 0 represents the number of CPUs

    "log_dir": "logs", // log info of worker at runtime
    "log_level": "all", // support `debug|info|warn|error|all|shutdown`, e.g. debug|warn,

    // TODO admin api or web
    "listen_admin": ":9527",

    "apps": [
        {
            "name": "test", // must, unique
            "listen": ":8081", // surpport :8080 or 192.168.1.101:8080 or []:8080
            "?listen": "[]:8080 represents ipv6 + ipv4 bind port 8080",

            "protocol": "http", // frontend transfer protocol

            "balance_policy": "roundrobin", // roundrobin/random/iphash

            "http_host": "default", // e.g. api.niubix.com

            "connect_backend_timeout": 1000, // connect backend server timeout, > 0 in msec

            "x-forwarded-for": true, // optional, default true
            "x-real-ip": true, // optional, default true

            "backend_protocol": "http", // Worker to backend stranser protocol

            "backends": [
                {
                    "health_check_period": 1000, // in msec, check period, integer, 0: not check
                    "health_check_timeout": 1000, // in msec, integer, must > 0
                    "health_check_uri": "/x", // The complete URL is: backend_protocol://host+health_check_uri
                    "?health_check_uri": "use GET method. Must start with /",
                    "?health_check_uri": "just return the http status code=200",
                    "?health_check_uri": "just for http-protocol",
                    "?health_check_uri": "empty represents do not check health",
                    // go offline after one failure, and resume online after three consecutive successes
                    // Hot update not supported

                    "down": true, // optional default false, TODO hot update
                    "weight": 50, // optional, >=0, default 1, 0 will skip this one, for roundrobin 
                    "host": "10.146.0.3:8080" // ip+port"
                }
            ]
        }
    ]
}
